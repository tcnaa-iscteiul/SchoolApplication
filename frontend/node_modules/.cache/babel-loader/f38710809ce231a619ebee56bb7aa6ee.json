{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Utilizador\\\\OneDrive\\\\Ambiente de Trabalho\\\\SchoolApplication\\\\frontend\\\\src\\\\components\\\\Admin\\\\CreateStudent.tsx\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport Button from '@mui/material/Button';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport TextField from '@mui/material/TextField';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport Typography from '@mui/material/Typography';\nimport Container from '@mui/material/Container';\nimport { useEffect, useState } from 'react';\nimport useInput from '../../hooks/useInput';\nimport { Fragment } from 'react';\nimport Modal from '../UI/Modal';\nimport LoadingSpinner from '../UI/LoadingSpinner';\nimport { memo } from 'react';\nimport useAxios from '../../hooks/use-axios';\nimport { fetchUsersData } from '../../store/usersActions';\nimport { useAppDispatch } from '../../hooks/use-redux';\nimport CreateStudentFields from './CreateStudentFields';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CreateStudent() {\n  _s();\n\n  const dispatch = useAppDispatch();\n  const [showModal, setShowModal] = useState(false);\n  const [showFields, setShowFields] = useState(false);\n  const [message, setMessage] = useState('');\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  const {\n    value: enteredEmail,\n    isValid: enteredEmailIsValid,\n    hasError: emailInputHasError,\n    valueChangeHandler: emailChangedHandler,\n    valueBlurHandler: emailBlurHandler,\n    reset: resetEmailInput\n  } = useInput(value => re.test(value) && value.length < 100);\n  const {\n    response,\n    error,\n    loading: isLoading,\n    sendData\n  } = useAxios({\n    method: 'Get',\n    url: 'user/all',\n    params: {\n      email: enteredEmail\n    }\n  });\n  const validateForm = enteredEmailIsValid;\n\n  const resetInputs = () => {\n    resetEmailInput();\n    setShowFields(false);\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    sendData();\n  };\n\n  useEffect(() => {\n    if ((response === null || response === void 0 ? void 0 : response.data.length) === 0 && response.statusText === 'OK') {\n      setShowModal(false);\n      setShowFields(true);\n    } else if ((response === null || response === void 0 ? void 0 : response.data.length) !== 0 && (response === null || response === void 0 ? void 0 : response.statusText) === 'OK') {\n      setShowModal(true);\n      setMessage('Email already registered');\n      resetEmailInput();\n    } else {\n      setShowModal(true);\n      resetEmailInput();\n    }\n  }, [response, error]);\n\n  const handleCloseModal = () => {\n    if (!error) {\n      dispatch(fetchUsersData());\n    }\n\n    setShowModal(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [isLoading && /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }, this), !isLoading && (message || error) && /*#__PURE__*/_jsxDEV(Modal, {\n      open: showModal,\n      onClose: handleCloseModal,\n      message: error || message,\n      title: 'Error'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      component: \"main\",\n      maxWidth: \"xs\",\n      children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          component: \"h1\",\n          variant: \"h5\",\n          children: \"Create Student\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          component: \"form\",\n          onSubmit: handleSubmit,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                required: true,\n                fullWidth: true,\n                disabled: showFields,\n                error: emailInputHasError,\n                id: \"email\",\n                label: \"Email Address\",\n                name: \"email\",\n                autoComplete: \"email\",\n                value: enteredEmail,\n                onChange: emailChangedHandler,\n                onBlur: emailBlurHandler,\n                helperText: emailInputHasError && enteredEmail && 'Please insert a valid email'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                fullWidth: true,\n                type: \"submit\",\n                variant: \"contained\",\n                disabled: !validateForm || showFields,\n                children: \"Search Student\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                fullWidth: true,\n                onClick: () => {\n                  setShowFields(false);\n                },\n                variant: \"contained\",\n                disabled: !showFields,\n                children: \"Edit Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), showFields && /*#__PURE__*/_jsxDEV(CreateStudentFields, {\n        email: enteredEmail,\n        resetInputs: resetInputs\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CreateStudent, \"Jwm3FXOZNUtLEnZQ31kMl636jDI=\", false, function () {\n  return [useAppDispatch, useInput, useAxios];\n});\n\n_c = CreateStudent;\nexport default _c2 = /*#__PURE__*/memo(CreateStudent);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CreateStudent\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","Button","CssBaseline","TextField","Grid","Box","Typography","Container","useEffect","useState","useInput","Fragment","Modal","LoadingSpinner","memo","useAxios","fetchUsersData","useAppDispatch","CreateStudentFields","CreateStudent","dispatch","showModal","setShowModal","showFields","setShowFields","message","setMessage","re","value","enteredEmail","isValid","enteredEmailIsValid","hasError","emailInputHasError","valueChangeHandler","emailChangedHandler","valueBlurHandler","emailBlurHandler","reset","resetEmailInput","test","length","response","error","loading","isLoading","sendData","method","url","params","email","validateForm","resetInputs","handleSubmit","event","preventDefault","data","statusText","handleCloseModal"],"sources":["C:/Users/Utilizador/OneDrive/Ambiente de Trabalho/SchoolApplication/frontend/src/components/Admin/CreateStudent.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport CssBaseline from '@mui/material/CssBaseline';\r\nimport TextField from '@mui/material/TextField';\r\nimport Grid from '@mui/material/Grid';\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\nimport Container from '@mui/material/Container';\r\nimport { useEffect, useState } from 'react';\r\nimport useInput from '../../hooks/useInput';\r\nimport { Fragment } from 'react';\r\nimport Modal from '../UI/Modal';\r\nimport LoadingSpinner from '../UI/LoadingSpinner';\r\nimport { memo } from 'react';\r\nimport useAxios from '../../hooks/use-axios';\r\nimport { fetchUsersData } from '../../store/usersActions';\r\nimport { useAppDispatch } from '../../hooks/use-redux';\r\nimport CreateStudentFields from './CreateStudentFields';\r\n\r\nfunction CreateStudent() {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [showModal, setShowModal] = useState<boolean>(false);\r\n  const [showFields, setShowFields] = useState<boolean>(false);\r\n  const [message, setMessage] = useState<string>('');\r\n\r\n  const re =\r\n    /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  const {\r\n    value: enteredEmail,\r\n    isValid: enteredEmailIsValid,\r\n    hasError: emailInputHasError,\r\n    valueChangeHandler: emailChangedHandler,\r\n    valueBlurHandler: emailBlurHandler,\r\n    reset: resetEmailInput,\r\n  } = useInput((value: string) => re.test(value) && value.length < 100);\r\n\r\n  const {\r\n    response,\r\n    error,\r\n    loading: isLoading,\r\n    sendData,\r\n  } = useAxios({\r\n    method: 'Get',\r\n    url: 'user/all',\r\n    params: {\r\n      email: enteredEmail,\r\n    },\r\n  });\r\n\r\n  const validateForm: boolean = enteredEmailIsValid;\r\n\r\n  const resetInputs = () => {\r\n    resetEmailInput();\r\n    setShowFields(false);\r\n  };\r\n\r\n  const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    sendData();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (response?.data.length === 0 && response.statusText === 'OK') {\r\n      setShowModal(false);\r\n      setShowFields(true);\r\n    } else if (response?.data.length !== 0 && response?.statusText === 'OK') {\r\n      setShowModal(true);\r\n      setMessage('Email already registered');\r\n      resetEmailInput();\r\n    } else {\r\n      setShowModal(true);\r\n      resetEmailInput();\r\n    }\r\n  }, [response, error]);\r\n\r\n  const handleCloseModal = () => {\r\n    if (!error) {\r\n      dispatch(fetchUsersData());\r\n    }\r\n    setShowModal(false);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {isLoading && <LoadingSpinner />}\r\n      {!isLoading && (message || error) && (\r\n        <Modal\r\n          open={showModal}\r\n          onClose={handleCloseModal}\r\n          message={error || message}\r\n          title={'Error'}\r\n        />\r\n      )}\r\n      <Container component=\"main\" maxWidth=\"xs\">\r\n        <CssBaseline />\r\n        <Box display=\"flex\">\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Create Student\r\n          </Typography>\r\n          <Box component=\"form\" onSubmit={handleSubmit}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  required\r\n                  fullWidth\r\n                  disabled={showFields}\r\n                  error={emailInputHasError}\r\n                  id=\"email\"\r\n                  label=\"Email Address\"\r\n                  name=\"email\"\r\n                  autoComplete=\"email\"\r\n                  value={enteredEmail}\r\n                  onChange={emailChangedHandler}\r\n                  onBlur={emailBlurHandler}\r\n                  helperText={\r\n                    emailInputHasError &&\r\n                    enteredEmail &&\r\n                    'Please insert a valid email'\r\n                  }\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item xs={12}>\r\n                <Button\r\n                  fullWidth\r\n                  type=\"submit\"\r\n                  variant=\"contained\"\r\n                  disabled={!validateForm || showFields}\r\n                >\r\n                  Search Student\r\n                </Button>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <Button\r\n                  fullWidth\r\n                  onClick={() => {\r\n                    setShowFields(false);\r\n                  }}\r\n                  variant=\"contained\"\r\n                  disabled={!showFields}\r\n                >\r\n                  Edit Email\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </Box>\r\n        {showFields && (\r\n          <CreateStudentFields email={enteredEmail} resetInputs={resetInputs} />\r\n        )}\r\n      </Container>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default memo(CreateStudent);\r\n"],"mappings":";;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,cAAP,MAA2B,sBAA3B;AACA,SAASC,IAAT,QAAqB,OAArB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,SAASC,cAAT,QAA+B,0BAA/B;AACA,SAASC,cAAT,QAA+B,uBAA/B;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;;;AAEA,SAASC,aAAT,GAAyB;EAAA;;EACvB,MAAMC,QAAQ,GAAGH,cAAc,EAA/B;EAEA,MAAM,CAACI,SAAD,EAAYC,YAAZ,IAA4Bb,QAAQ,CAAU,KAAV,CAA1C;EACA,MAAM,CAACc,UAAD,EAAaC,aAAb,IAA8Bf,QAAQ,CAAU,KAAV,CAA5C;EACA,MAAM,CAACgB,OAAD,EAAUC,UAAV,IAAwBjB,QAAQ,CAAS,EAAT,CAAtC;EAEA,MAAMkB,EAAE,GACN,uJADF;EAEA,MAAM;IACJC,KAAK,EAAEC,YADH;IAEJC,OAAO,EAAEC,mBAFL;IAGJC,QAAQ,EAAEC,kBAHN;IAIJC,kBAAkB,EAAEC,mBAJhB;IAKJC,gBAAgB,EAAEC,gBALd;IAMJC,KAAK,EAAEC;EANH,IAOF7B,QAAQ,CAAEkB,KAAD,IAAmBD,EAAE,CAACa,IAAH,CAAQZ,KAAR,KAAkBA,KAAK,CAACa,MAAN,GAAe,GAArD,CAPZ;EASA,MAAM;IACJC,QADI;IAEJC,KAFI;IAGJC,OAAO,EAAEC,SAHL;IAIJC;EAJI,IAKF/B,QAAQ,CAAC;IACXgC,MAAM,EAAE,KADG;IAEXC,GAAG,EAAE,UAFM;IAGXC,MAAM,EAAE;MACNC,KAAK,EAAErB;IADD;EAHG,CAAD,CALZ;EAaA,MAAMsB,YAAqB,GAAGpB,mBAA9B;;EAEA,MAAMqB,WAAW,GAAG,MAAM;IACxBb,eAAe;IACff,aAAa,CAAC,KAAD,CAAb;EACD,CAHD;;EAKA,MAAM6B,YAAY,GAAG,MAAOC,KAAP,IAAmD;IACtEA,KAAK,CAACC,cAAN;IACAT,QAAQ;EACT,CAHD;;EAKAtC,SAAS,CAAC,MAAM;IACd,IAAI,CAAAkC,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEc,IAAV,CAAef,MAAf,MAA0B,CAA1B,IAA+BC,QAAQ,CAACe,UAAT,KAAwB,IAA3D,EAAiE;MAC/DnC,YAAY,CAAC,KAAD,CAAZ;MACAE,aAAa,CAAC,IAAD,CAAb;IACD,CAHD,MAGO,IAAI,CAAAkB,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEc,IAAV,CAAef,MAAf,MAA0B,CAA1B,IAA+B,CAAAC,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEe,UAAV,MAAyB,IAA5D,EAAkE;MACvEnC,YAAY,CAAC,IAAD,CAAZ;MACAI,UAAU,CAAC,0BAAD,CAAV;MACAa,eAAe;IAChB,CAJM,MAIA;MACLjB,YAAY,CAAC,IAAD,CAAZ;MACAiB,eAAe;IAChB;EACF,CAZQ,EAYN,CAACG,QAAD,EAAWC,KAAX,CAZM,CAAT;;EAcA,MAAMe,gBAAgB,GAAG,MAAM;IAC7B,IAAI,CAACf,KAAL,EAAY;MACVvB,QAAQ,CAACJ,cAAc,EAAf,CAAR;IACD;;IACDM,YAAY,CAAC,KAAD,CAAZ;EACD,CALD;;EAOA,oBACE,QAAC,QAAD;IAAA,WACGuB,SAAS,iBAAI,QAAC,cAAD;MAAA;MAAA;MAAA;IAAA,QADhB,EAEG,CAACA,SAAD,KAAepB,OAAO,IAAIkB,KAA1B,kBACC,QAAC,KAAD;MACE,IAAI,EAAEtB,SADR;MAEE,OAAO,EAAEqC,gBAFX;MAGE,OAAO,EAAEf,KAAK,IAAIlB,OAHpB;MAIE,KAAK,EAAE;IAJT;MAAA;MAAA;MAAA;IAAA,QAHJ,eAUE,QAAC,SAAD;MAAW,SAAS,EAAC,MAArB;MAA4B,QAAQ,EAAC,IAArC;MAAA,wBACE,QAAC,WAAD;QAAA;QAAA;QAAA;MAAA,QADF,eAEE,QAAC,GAAD;QAAK,OAAO,EAAC,MAAb;QAAA,wBACE,QAAC,UAAD;UAAY,SAAS,EAAC,IAAtB;UAA2B,OAAO,EAAC,IAAnC;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAIE,QAAC,GAAD;UAAK,SAAS,EAAC,MAAf;UAAsB,QAAQ,EAAE4B,YAAhC;UAAA,uBACE,QAAC,IAAD;YAAM,SAAS,MAAf;YAAgB,OAAO,EAAE,CAAzB;YAAA,wBACE,QAAC,IAAD;cAAM,IAAI,MAAV;cAAW,EAAE,EAAE,EAAf;cAAA,uBACE,QAAC,SAAD;gBACE,QAAQ,MADV;gBAEE,SAAS,MAFX;gBAGE,QAAQ,EAAE9B,UAHZ;gBAIE,KAAK,EAAEU,kBAJT;gBAKE,EAAE,EAAC,OALL;gBAME,KAAK,EAAC,eANR;gBAOE,IAAI,EAAC,OAPP;gBAQE,YAAY,EAAC,OARf;gBASE,KAAK,EAAEJ,YATT;gBAUE,QAAQ,EAAEM,mBAVZ;gBAWE,MAAM,EAAEE,gBAXV;gBAYE,UAAU,EACRJ,kBAAkB,IAClBJ,YADA,IAEA;cAfJ;gBAAA;gBAAA;gBAAA;cAAA;YADF;cAAA;cAAA;cAAA;YAAA,QADF,eAsBE,QAAC,IAAD;cAAM,IAAI,MAAV;cAAW,EAAE,EAAE,EAAf;cAAA,uBACE,QAAC,MAAD;gBACE,SAAS,MADX;gBAEE,IAAI,EAAC,QAFP;gBAGE,OAAO,EAAC,WAHV;gBAIE,QAAQ,EAAE,CAACsB,YAAD,IAAiB5B,UAJ7B;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YADF;cAAA;cAAA;cAAA;YAAA,QAtBF,eAgCE,QAAC,IAAD;cAAM,IAAI,MAAV;cAAW,EAAE,EAAE,EAAf;cAAA,uBACE,QAAC,MAAD;gBACE,SAAS,MADX;gBAEE,OAAO,EAAE,MAAM;kBACbC,aAAa,CAAC,KAAD,CAAb;gBACD,CAJH;gBAKE,OAAO,EAAC,WALV;gBAME,QAAQ,EAAE,CAACD,UANb;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YADF;cAAA;cAAA;cAAA;YAAA,QAhCF;UAAA;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QAJF;MAAA;QAAA;QAAA;QAAA;MAAA,QAFF,EAsDGA,UAAU,iBACT,QAAC,mBAAD;QAAqB,KAAK,EAAEM,YAA5B;QAA0C,WAAW,EAAEuB;MAAvD;QAAA;QAAA;QAAA;MAAA,QAvDJ;IAAA;MAAA;MAAA;MAAA;IAAA,QAVF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAuED;;GAvIQjC,a;UACUF,c,EAebP,Q,EAOAK,Q;;;KAvBGI,a;AAyIT,kCAAeL,IAAI,CAACK,aAAD,CAAnB"},"metadata":{},"sourceType":"module"}