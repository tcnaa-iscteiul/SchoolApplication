{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { getCookie, removeCookie, setCookie } from 'typescript-cookie';\nimport { Status } from '../interfaces/Status';\nconst initialState = {\n  token: getCookie('token') || '',\n  status: getCookie('status') || null,\n  role: getCookie('role') || null\n}; // TODO:expiration time token\n\nexport const isAuthenticated = initialState.token;\nconst AuthSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    logout(state) {\n      state.token = '';\n      state.status = null;\n      state.role = null;\n      removeCookie('token');\n      removeCookie('status');\n      removeCookie('role');\n    },\n\n    login(state, action) {\n      if (action.payload.status !== Status.Inactive) {\n        state.token = action.payload.token;\n        state.status = action.payload.status;\n        state.role = action.payload.role;\n        setCookie('role', state.role);\n        setCookie('token', state.token);\n        setCookie('status', state.status); //  setTimeout(this.logout, 60);\n      }\n    }\n\n  }\n});\nexport const authActions = AuthSlice.actions;\nexport default AuthSlice;","map":{"version":3,"names":["createSlice","getCookie","removeCookie","setCookie","Status","initialState","token","status","role","isAuthenticated","AuthSlice","name","reducers","logout","state","login","action","payload","Inactive","authActions","actions"],"sources":["C:/Users/Utilizador/OneDrive/Ambiente de Trabalho/SchoolApplication/frontend/src/store/auth-slice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { getCookie, removeCookie, setCookie } from 'typescript-cookie';\r\nimport { Status } from '../interfaces/Status';\r\n\r\ntype Auth = {\r\n  token: string;\r\n  status: string | null;\r\n  role: string | null;\r\n};\r\n\r\nconst initialState: Auth = {\r\n  token: getCookie('token') || '',\r\n  status: getCookie('status') || null,\r\n  role: getCookie('role') || null,\r\n};\r\n// TODO:expiration time token\r\n\r\nexport const isAuthenticated = initialState.token;\r\n\r\nconst AuthSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    logout(state) {\r\n      state.token = '';\r\n      state.status = null;\r\n      state.role = null;\r\n      removeCookie('token');\r\n      removeCookie('status');\r\n      removeCookie('role');\r\n    },\r\n    login(state, action: PayloadAction<Auth>) {\r\n      if (action.payload.status !== Status.Inactive) {\r\n        state.token = action.payload.token;\r\n        state.status = action.payload.status;\r\n        state.role = action.payload.role;\r\n\r\n        setCookie('role', state.role);\r\n        setCookie('token', state.token);\r\n        setCookie('status', state.status);\r\n\r\n        //  setTimeout(this.logout, 60);\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nexport const authActions = AuthSlice.actions;\r\nexport default AuthSlice;\r\n"],"mappings":"AAAA,SAASA,WAAT,QAA2C,kBAA3C;AACA,SAASC,SAAT,EAAoBC,YAApB,EAAkCC,SAAlC,QAAmD,mBAAnD;AACA,SAASC,MAAT,QAAuB,sBAAvB;AAQA,MAAMC,YAAkB,GAAG;EACzBC,KAAK,EAAEL,SAAS,CAAC,OAAD,CAAT,IAAsB,EADJ;EAEzBM,MAAM,EAAEN,SAAS,CAAC,QAAD,CAAT,IAAuB,IAFN;EAGzBO,IAAI,EAAEP,SAAS,CAAC,MAAD,CAAT,IAAqB;AAHF,CAA3B,C,CAKA;;AAEA,OAAO,MAAMQ,eAAe,GAAGJ,YAAY,CAACC,KAArC;AAEP,MAAMI,SAAS,GAAGV,WAAW,CAAC;EAC5BW,IAAI,EAAE,MADsB;EAE5BN,YAF4B;EAG5BO,QAAQ,EAAE;IACRC,MAAM,CAACC,KAAD,EAAQ;MACZA,KAAK,CAACR,KAAN,GAAc,EAAd;MACAQ,KAAK,CAACP,MAAN,GAAe,IAAf;MACAO,KAAK,CAACN,IAAN,GAAa,IAAb;MACAN,YAAY,CAAC,OAAD,CAAZ;MACAA,YAAY,CAAC,QAAD,CAAZ;MACAA,YAAY,CAAC,MAAD,CAAZ;IACD,CARO;;IASRa,KAAK,CAACD,KAAD,EAAQE,MAAR,EAAqC;MACxC,IAAIA,MAAM,CAACC,OAAP,CAAeV,MAAf,KAA0BH,MAAM,CAACc,QAArC,EAA+C;QAC7CJ,KAAK,CAACR,KAAN,GAAcU,MAAM,CAACC,OAAP,CAAeX,KAA7B;QACAQ,KAAK,CAACP,MAAN,GAAeS,MAAM,CAACC,OAAP,CAAeV,MAA9B;QACAO,KAAK,CAACN,IAAN,GAAaQ,MAAM,CAACC,OAAP,CAAeT,IAA5B;QAEAL,SAAS,CAAC,MAAD,EAASW,KAAK,CAACN,IAAf,CAAT;QACAL,SAAS,CAAC,OAAD,EAAUW,KAAK,CAACR,KAAhB,CAAT;QACAH,SAAS,CAAC,QAAD,EAAWW,KAAK,CAACP,MAAjB,CAAT,CAP6C,CAS7C;MACD;IACF;;EArBO;AAHkB,CAAD,CAA7B;AA4BA,OAAO,MAAMY,WAAW,GAAGT,SAAS,CAACU,OAA9B;AACP,eAAeV,SAAf"},"metadata":{},"sourceType":"module"}